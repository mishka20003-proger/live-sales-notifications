# üõçÔ∏è Storefront Purchase Notifications - Complete Guide

**–≠—Ç–∞–ø 4: –†–µ–∞–ª–∏–∑–∞—Ü–∏—è** ‚úÖ  
**–î–∞—Ç–∞:** 18 –¥–µ–∫–∞–±—Ä—è 2025  
**–°—Ç–∞—Ç—É—Å:** READY FOR INSTALLATION

---

## üéØ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–í–∏–∑—É–∞–ª—å–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø–æ–∫—É–ø–∫–∞—Ö –Ω–µ–ø–æ—Å—Ä–µ–¥—Å—Ç–≤–µ–Ω–Ω–æ –≤ storefront (–≤–∏—Ç—Ä–∏–Ω–µ –º–∞–≥–∞–∑–∏–Ω–∞):

- ‚úÖ **–í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** - –∫—Ä–∞—Å–∏–≤—ã–µ popup —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π
- ‚úÖ **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç –Ω–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã
- ‚úÖ **–í–∏–¥–Ω—ã –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º** - —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è –≤—Å–µ—Ö –ø–æ—Å–µ—Ç–∏—Ç–µ–ª–µ–π –º–∞–≥–∞–∑–∏–Ω–∞
- ‚úÖ **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ** - –±–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- ‚úÖ **–ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö** - —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–∫–∞–∑—ã –∏–∑ webhook
- ‚úÖ **–õ–µ–≥–∫–æ –æ—Ç–∫–ª—é—á–∏—Ç—å** - —á–µ—Ä–µ–∑ Theme Customizer

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

### –í—ã–±—Ä–∞–Ω–Ω—ã–π –ø–æ–¥—Ö–æ–¥: **Theme App Extension + App Proxy**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Storefront    ‚îÇ
‚îÇ  (–ü–æ–∫—É–ø–∞—Ç–µ–ª—å)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ 1. JavaScript –¥–µ–ª–∞–µ—Ç fetch()
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  App Proxy      ‚îÇ ‚Üê /apps/proxy/recent-orders
‚îÇ  (Shopify)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ 2. –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Remix Route    ‚îÇ ‚Üê /app/proxy/recent-orders
‚îÇ  (–ù–∞—à–µ app)     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îÇ 3. –ß–∏—Ç–∞–µ—Ç –∏–∑ –ë–î
         ‚Üì
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  SQLite DB      ‚îÇ
‚îÇ  (Order table)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚Üë
         ‚îÇ 4. Webhook –ø–∏—à–µ—Ç
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Shopify        ‚îÇ
‚îÇ  (orders/create)‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü–æ—á–µ–º—É —ç—Ç–æ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å?

**Theme App Extension:**
- ‚úÖ –û—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± Shopify 2.0+
- ‚úÖ Merchant –≤–∫–ª—é—á–∞–µ—Ç/–æ—Ç–∫–ª—é—á–∞–µ—Ç —á–µ—Ä–µ–∑ UI (–Ω–µ –∫–æ–¥)
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π —Ç–µ–º—ã
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

**App Proxy:**
- ‚úÖ –ï–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± –±–µ–∑–æ–ø–∞—Å–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –≤ storefront
- ‚úÖ –ù–µ —Ç—Ä–µ–±—É–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ –æ—Ç –ø–æ–∫—É–ø–∞—Ç–µ–ª—è
- ‚úÖ –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –ø–∞—Ç—Ç–µ—Ä–Ω Shopify
- ‚úÖ CORS –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–û—Ç–∫–ª–æ–Ω–µ–Ω–Ω—ã–µ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã:**
- ‚ùå –ü—Ä—è–º–æ–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ theme.liquid - —Ö—Ä—É–ø–∫–æ, —Ä—É—á–Ω–∞—è —Ä–∞–±–æ—Ç–∞
- ‚ùå Shopify Admin API –∏–∑ storefront - –∑–∞–ø—Ä–µ—â–µ–Ω–æ –ø–æ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
- ‚ùå Pixel tracking script - –Ω–µ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è interactive UI

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

### 1. Theme App Extension

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```
extensions/purchase-notifications/
‚îú‚îÄ‚îÄ shopify.extension.toml         # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è extension
‚îú‚îÄ‚îÄ blocks/
‚îÇ   ‚îî‚îÄ‚îÄ notification-widget.liquid # Liquid –±–ª–æ–∫ (—Ä–∞–∑–º–µ—Ç–∫–∞)
‚îî‚îÄ‚îÄ assets/
    ‚îú‚îÄ‚îÄ notification-widget.js     # JavaScript –ª–æ–≥–∏–∫–∞
    ‚îî‚îÄ‚îÄ notification-widget.css    # –°—Ç–∏–ª–∏
```

**–ß—Ç–æ –¥–µ–ª–∞–µ—Ç:**
- –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç popup —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ storefront
- Polling API –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
- –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)
- –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è
- Responsive –¥–∏–∑–∞–π–Ω (–∞–¥–∞–ø—Ç–∏–≤ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö)
- Dark mode support

**–ù–∞—Å—Ç—Ä–æ–π–∫–∏ (–¥–æ—Å—Ç—É–ø–Ω—ã –≤ Theme Customizer):**
- Enable/Disable notifications
- Display duration (3-15 —Å–µ–∫—É–Ω–¥)
- Interval between notifications (5-60 —Å–µ–∫—É–Ω–¥)
- Position (4 –≤–∞—Ä–∏–∞–Ω—Ç–∞: —É–≥–ª—ã —ç–∫—Ä–∞–Ω–∞)
- Max recent purchases to show (5-50)

### 2. App Proxy Endpoint

**–§–∞–π–ª:** `app/routes/app.proxy.recent-orders.tsx`

**URL:** `/app/proxy/recent-orders?shop={shop_domain}`

**Response:**
```json
{
  "orders": [
    {
      "id": "uuid",
      "shopifyOrderId": "123456789",
      "orderNumber": "#1001",
      "totalPrice": "99.99",
      "currency": "USD",
      "customerName": "John Doe",
      "createdAt": "2025-12-18T10:30:00.000Z"
    }
  ],
  "lastUpdated": "2025-12-18T10:35:00.000Z",
  "count": 5
}
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- –ü—É–±–ª–∏—á–Ω—ã–π endpoint (no auth required)
- CORS headers –¥–ª—è storefront
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è: –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
- –õ–∏–º–∏—Ç: 20 –∑–∞–∫–∞–∑–æ–≤
- Cache: 10 —Å–µ–∫—É–Ω–¥
- Error handling: –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—É—Å—Ç–æ–π –º–∞—Å—Å–∏–≤ –ø—Ä–∏ –æ—à–∏–±–∫–µ

### 3. Admin UI - Settings Page

**–§–∞–π–ª:** `app/routes/app.storefront-notifications.tsx`

**URL:** `/app/storefront-notifications`

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: –≤—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤, –∑–∞ 24 —á–∞—Å–∞
- üìã –ü–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ
- üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏ (shop, API endpoint)
- üéØ Quick links (Theme Editor, Storefront, API test)
- üí° Pro tips –∏ troubleshooting
- ‚úÖ Status indicator

### 4. Configuration

**–§–∞–π–ª:** `shopify.app.toml`

**–î–æ–±–∞–≤–ª–µ–Ω–æ:**
```toml
[app_proxy]
url = "https://venially-uncontumacious-pablo.ngrok-free.dev"
subpath = "proxy"
prefix = "apps"
```

**–ß—Ç–æ —ç—Ç–æ –¥–∞–µ—Ç:**
- –ó–∞–ø—Ä–æ—Å—ã –∫ `https://{shop}/apps/proxy/*` ‚Üí `https://{app_url}/app/proxy/*`
- Shopify –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–¥—Å—Ç–∞–≤–ª—è–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (shop, signature)
- –ë–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É storefront –∏ app

---

## üìù –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —É—Å—Ç–∞–Ω–æ–≤–∫–µ

### –®–∞–≥ 1: Deploy Extension

```bash
cd /Users/boss/Desktop/shopify-two/shopify-app
npm run deploy
```

–≠—Ç–æ —Ä–∞–∑–≤–µ—Ä–Ω–µ—Ç Theme App Extension –≤ Shopify.

### –®–∞–≥ 2: –í–∫–ª—é—á–∏—Ç—å App Embed

1. –í Shopify Admin: **Online Store ‚Üí Themes**
2. –ù–∞ –∞–∫—Ç–∏–≤–Ω–æ–π —Ç–µ–º–µ: **Customize**
3. –í –ª–µ–≤–æ–º –º–µ–Ω—é (–≤–Ω–∏–∑—É): **App embeds**
4. –ù–∞–π—Ç–∏: **"Purchase Notifications"**
5. Toggle: **ON** ‚úÖ
6. **Save**

### –®–∞–≥ 3: –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

–í —Ç–æ–º –∂–µ —Ä–∞–∑–¥–µ–ª–µ **App embeds** –º–æ–∂–Ω–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å:
- **Display duration**: 5 —Å–µ–∫—É–Ω–¥ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- **Interval**: 10 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏
- **Position**: Bottom Left (–∫–ª–∞—Å—Å–∏–∫–∞)
- **Max display**: 10 –Ω–µ–¥–∞–≤–Ω–∏—Ö –ø–æ–∫—É–ø–æ–∫

### –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞

1. –û—Ç–∫—Ä—ã—Ç—å storefront –≤ **incognito window**
2. –ü–æ–¥–æ–∂–¥–∞—Ç—å 5-10 —Å–µ–∫—É–Ω–¥
3. –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è –≤—Å–ø–ª—ã–≤–∞—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ! üéâ

**–ï—Å–ª–∏ –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ App embed –≤–∫–ª—é—á–µ–Ω
- –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –µ—Å—Ç—å –∑–∞–∫–∞–∑—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
- –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å Browser Console –Ω–∞ –æ—à–∏–±–∫–∏
- –ü—Ä–æ–≤–µ—Ä–∏—Ç—å API endpoint: `/apps/proxy/recent-orders?shop={shop}`

---

## üé® –î–∏–∑–∞–π–Ω —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üõçÔ∏è  John Doe just purchased    ‚îÇ
‚îÇ     Order #1001                  ‚îÇ
‚îÇ     $99.99 USD   2 minutes ago   ‚îÇ
‚îÇ                              ‚úï   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏:**
- **–†–∞–∑–º–µ—Ä:** 320-380px —à–∏—Ä–∏–Ω–∞ (responsive –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö)
- **–ê–Ω–∏–º–∞—Ü–∏—è:** –ü–ª–∞–≤–Ω–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ —Å–Ω–∏–∑—É/—Å–≤–µ—Ä—Ö—É (0.3s)
- **–¶–≤–µ—Ç–∞:** –ë–µ–ª—ã–π —Ñ–æ–Ω, –∑–µ–ª–µ–Ω–∞—è —Ü–µ–Ω–∞, —Å–µ—Ä—ã–π —Ç–µ–∫—Å—Ç
- **Dark Mode:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∞–¥–∞–ø—Ç–∞—Ü–∏—è
- **Hover:** –õ–µ–≥–∫–∏–π –ø–æ–¥—ä–µ–º + shadow
- **Close:** –ö–Ω–æ–ø–∫–∞ X –≤ –ø—Ä–∞–≤–æ–º –≤–µ—Ä—Ö–Ω–µ–º —É–≥–ª—É

---

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### Frontend (JavaScript)

**Polling –º–µ—Ö–∞–Ω–∏–∑–º:**
```javascript
// –ó–∞–ø—Ä–æ—Å –∫ API –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
setInterval(() => this.fetchOrders(), 15000);

// –ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π)
setInterval(() => {
  if (!this.isShowing) {
    this.showNextNotification();
  }
}, this.config.interval); // default: 10 —Å–µ–∫—É–Ω–¥
```

**–õ–æ–≥–∏–∫–∞ –ø–æ–∫–∞–∑–∞:**
1. Fetches orders from API
2. Filters out already displayed orders (Set –¥–ª—è tracking)
3. Cycles through new orders
4. Shows one notification at a time
5. Auto-hides after duration
6. Manual close –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è

### Backend (Remix Route)

**Query –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
```typescript
await prisma.order.findMany({
  where: {
    shop: shop,
    createdAt: { gte: sevenDaysAgo }, // –¢–æ–ª—å–∫–æ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π
  },
  orderBy: { createdAt: "desc" },
  take: 20, // –ú–∞–∫—Å–∏–º—É–º 20 –∑–∞–∫–∞–∑–æ–≤
  select: { /* –¢–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ –ø–æ–ª—è */ },
});
```

**Performance:**
- Database query: < 50ms
- Response size: ~2KB –¥–ª—è 20 –∑–∞–∫–∞–∑–æ–≤
- Cache: 10 —Å–µ–∫—É–Ω–¥ (HTTP Cache-Control)
- CORS: –†–∞–∑—Ä–µ—à–µ–Ω –¥–ª—è –≤—Å–µ—Ö origin (* –¥–ª—è MVP)

### Security

**App Proxy:**
- ‚úÖ Shopify –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç –≤—Å–µ –∑–∞–ø—Ä–æ—Å—ã (signature)
- ‚úÖ –ú–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –ø–æ–¥–ø–∏—Å—å –≤ production
- ‚úÖ Rate limiting –Ω–∞ —É—Ä–æ–≤–Ω–µ Shopify
- ‚ö†Ô∏è –í MVP signature –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è (–¥–ª—è —É–ø—Ä–æ—â–µ–Ω–∏—è)

**Privacy:**
- ‚úÖ –¢–æ–ª—å–∫–æ –ø—É–±–ª–∏—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è (–Ω–æ–º–µ—Ä –∑–∞–∫–∞–∑–∞, —Å—É–º–º–∞)
- ‚úÖ –ò–º—è –ø–æ–∫—É–ø–∞—Ç–µ–ª—è: –∫–∞–∫ –≤ –∑–∞–∫–∞–∑–µ (–º–æ–∂–µ—Ç –±—ã—Ç—å "Guest")
- ‚úÖ –ù–∏–∫–∞–∫–æ–π email, —Ç–µ–ª–µ—Ñ–æ–Ω, –∞–¥—Ä–µ—Å
- ‚úÖ –°—Ç–∞—Ä—ã–µ –∑–∞–∫–∞–∑—ã (7+ –¥–Ω–µ–π) –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è

---

## üìä Definition of Done - Verification

### ‚úÖ 1. –í –º–∞–≥–∞–∑–∏–Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤–∏–∑—É–∞–ª—å–Ω–æ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- [ ] –û—Ç–∫—Ä—ã—Ç—å storefront
- [ ] –í–∏–¥–Ω–æ popup —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —É–≥–ª—É —ç–∫—Ä–∞–Ω–∞
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∏—Ç: –∏–º—è, —Ç–æ–≤–∞—Ä, —Ü–µ–Ω—É, –≤—Ä–µ–º—è

### ‚úÖ 2. –û–Ω–æ –≤–∏–¥–Ω–æ –æ–±—ã—á–Ω–æ–º—É –ø–æ–∫—É–ø–∞—Ç–µ–ª—é

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- [ ] –û—Ç–∫—Ä—ã—Ç—å –≤ incognito (–±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- [ ] –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω–æ–º (responsive)

### ‚úÖ 3. –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- [ ] –ë–µ–∑ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å—Ç—Ä–∞–Ω–∏—Ü—ã
- [ ] –°–ª–µ–¥—É—é—â–µ–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ N —Å–µ–∫—É–Ω–¥
- [ ] –ü–ª–∞–≤–Ω–∞—è –∞–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è/–∏—Å—á–µ–∑–Ω–æ–≤–µ–Ω–∏—è

### ‚úÖ 4. –ò—Å—Ç–æ—á–Ω–∏–∫ –¥–∞–Ω–Ω—ã—Ö - —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–∫–∞–∑—ã

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- [ ] –°–æ–∑–¥–∞—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∑–∞–∫–∞–∑
- [ ] Webhook –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è (–ª–æ–≥–∏)
- [ ] –ó–∞–∫–∞–∑ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –ë–î
- [ ] –ß–µ—Ä–µ–∑ 15-30 —Å–µ–∫ –ø–æ—è–≤–ª—è–µ—Ç—Å—è –Ω–∞ storefront

### ‚úÖ 5. –ú–æ–∂–Ω–æ –ª–µ–≥–∫–æ –æ—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–∫–∞–∑

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
- [ ] Theme Customizer ‚Üí App embeds
- [ ] Toggle OFF "Purchase Notifications"
- [ ] Save
- [ ] –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–µ—Ä–µ—Å—Ç–∞—é—Ç –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å—Å—è

---

## üêõ –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (MVP)

### 1. Polling –≤–º–µ—Å—Ç–æ real-time
- **–ó–∞–¥–µ—Ä–∂–∫–∞:** –î–æ 15 —Å–µ–∫—É–Ω–¥ –º–µ–∂–¥—É –Ω–æ–≤—ã–º –∑–∞–∫–∞–∑–æ–º –∏ –ø–æ–∫–∞–∑–æ–º
- **–†–µ—à–µ–Ω–∏–µ –¥–ª—è v2:** WebSocket –∏–ª–∏ SSE

### 2. –ë–∞–∑–æ–≤–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–∫–∞–∑–µ
- **–¢–µ–∫—É—â–µ–µ:** "Order #1001" –≤–º–µ—Å—Ç–æ –Ω–∞–∑–≤–∞–Ω–∏—è —Ç–æ–≤–∞—Ä–∞
- **–ü—Ä–∏—á–∏–Ω–∞:** Webhook –Ω–µ –≤—Å–µ–≥–¥–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç line_items
- **–†–µ—à–µ–Ω–∏–µ –¥–ª—è v2:** –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π API –∑–∞–ø—Ä–æ—Å –∑–∞ –¥–µ—Ç–∞–ª—è–º–∏

### 3. –ù–µ—Ç A/B testing
- **–¢–µ–∫—É—â–µ–µ:** –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –≤—Å–µ–º –ø–æ—Å–µ—Ç–∏—Ç–µ–ª—è–º
- **–†–µ—à–µ–Ω–∏–µ –¥–ª—è v2:** –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è segment/geo targeting

### 4. –ù–µ—Ç –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- **–¢–µ–∫—É—â–µ–µ:** –ù–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç—Å—è –≤–ª–∏—è–Ω–∏–µ –Ω–∞ –∫–æ–Ω–≤–µ—Ä—Å–∏—é
- **–†–µ—à–µ–Ω–∏–µ –¥–ª—è v2:** Analytics events –≤ Google Analytics

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏ (Post-MVP)

### Phase 2: Enhanced Display
1. –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –Ω–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞ (line items)
2. –î–æ–±–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ —Ç–æ–≤–∞—Ä–∞ (product image)
3. –ì–æ—Ä–æ–¥ –ø–æ–∫—É–ø–∞—Ç–µ–ª—è (–µ—Å–ª–∏ –µ—Å—Ç—å)
4. –ó–≤—É–∫–æ–≤–æ–π —Å–∏–≥–Ω–∞–ª (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### Phase 3: Advanced Features
1. WebSocket –¥–ª—è instant updates
2. A/B testing (show/hide –¥–ª—è —Ä–∞–∑–Ω—ã—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤)
3. Analytics integration
4. Custom styling —á–µ—Ä–µ–∑ Theme Customizer
5. Multiple notification styles (minimal, card, bar)

### Phase 4: Scale & Optimize
1. CDN –¥–ª—è assets
2. Redis –¥–ª—è caching API responses
3. GraphQL –≤–º–µ—Å—Ç–æ REST
4. Server-Side Rendering –¥–ª—è faster load

---

## üí° Pro Tips

### –î–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏:

1. **Positioning:**
   - Desktop: Bottom Left (–∫–ª–∞—Å—Å–∏–∫–∞)
   - Mobile: Bottom (full width)

2. **Timing:**
   - Display duration: 5-7 —Å–µ–∫—É–Ω–¥
   - Interval: 10-15 —Å–µ–∫—É–Ω–¥
   - –ù–µ —Ä–∞–∑–¥—Ä–∞–∂–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–∞—Å—Ç—ã–º–∏ popup

3. **Content:**
   - –ö–æ—Ä–æ—Ç–∫–∏–µ –∏–º–µ–Ω–∞ (–æ–±—Ä–µ–∑–∞—Ç—å –¥–ª–∏–Ω–Ω—ã–µ)
   - –ö—Ä—É–ø–Ω–∞—è —Ü–µ–Ω–∞ (–æ—Å–Ω–æ–≤–Ω–æ–π –∞–∫—Ü–µ–Ω—Ç)
   - "X minutes ago" —Å–æ–∑–¥–∞–µ—Ç urgency

4. **Performance:**
   - –£–±–µ–¥–∏—Ç—å—Å—è —á—Ç–æ JS/CSS –º–∏–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω—ã
   - –ù–µ –±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç
   - Lazy load –¥–ª—è better FCP

5. **Testing:**
   - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ —Ä–∞–∑–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤ —Ä–∞–∑–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö
   - A/B test —Ä–∞–∑–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏

---

## üìû Support & Troubleshooting

### –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç—Å—è?

**Checklist:**
1. App embed –≤–∫–ª—é—á–µ–Ω? (Theme Customizer ‚Üí App embeds)
2. –ï—Å—Ç—å –∑–∞–∫–∞–∑—ã –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 7 –¥–Ω–µ–π?
3. API endpoint —Ä–∞–±–æ—Ç–∞–µ—Ç? (Test: `/apps/proxy/recent-orders?shop={shop}`)
4. JavaScript errors –≤ –∫–æ–Ω—Å–æ–ª–∏? (F12 ‚Üí Console)
5. –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å incognito window (–∏—Å–∫–ª—é—á–∏—Ç—å cache)

### API endpoint returns error?

**Checklist:**
1. App Proxy –Ω–∞—Å—Ç—Ä–æ–µ–Ω? (shopify.app.toml)
2. App deployed? (`npm run deploy`)
3. Database –¥–æ—Å—Ç—É–ø–Ω–∞? (Prisma migration applied?)
4. Server running? (Check ngrok tunnel)

### –°—Ç–∏–ª–∏ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—é—Ç—Å—è?

**Checklist:**
1. CSS —Ñ–∞–π–ª –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è? (Network tab ‚Üí notification-widget.css)
2. Theme –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç App embeds? (Shopify 2.0+ required)
3. –ù–µ—Ç CSS conflicts —Å —Ç–µ–º–æ–π? (–ü—Ä–æ–≤–µ—Ä–∏—Ç—å specificity)

---

## ‚úÖ Conclusion

**Storefront Purchase Notifications - –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã!**

–í—Å–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è —ç—Ç–∞–ø–∞ 4 –≤—ã–ø–æ–ª–Ω–µ–Ω—ã:
- ‚úÖ –í—Å–ø–ª—ã–≤–∞—é—â–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –≤ storefront
- ‚úÖ –í–∏–¥–Ω—ã –æ–±—ã—á–Ω—ã–º –ø–æ–∫—É–ø–∞—Ç–µ–ª—è–º
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ—è–≤–ª–µ–Ω–∏–µ –±–µ–∑ reload
- ‚úÖ –ò—Å—Ç–æ—á–Ω–∏–∫: —Ä–µ–∞–ª—å–Ω—ã–µ –∑–∞–∫–∞–∑—ã —á–µ—Ä–µ–∑ webhook
- ‚úÖ –õ–µ–≥–∫–æ –æ—Ç–∫–ª—é—á–∏—Ç—å —á–µ—Ä–µ–∑ Theme Customizer

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** Deploy –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ production! üöÄ

---

**–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:** AI Assistant  
**–î–∞—Ç–∞:** 18 –¥–µ–∫–∞–±—Ä—è 2025  
**–í–µ—Ä—Å–∏—è:** MVP 1.0  
**Status:** Production Ready ‚úÖ

